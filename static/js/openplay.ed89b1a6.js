(function(e){function t(t){for(var r,a,s=t[0],c=t[1],u=t[2],p=0,f=[];p<s.length;p++)a=s[p],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&f.push(o[a][0]),o[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);l&&l(t);while(f.length)f.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,s=1;s<n.length;s++){var c=n[s];0!==o[c]&&(r=!1)}r&&(i.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},o={openplay:0},i=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/cg/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var l=c;i.push([3,"chunk-vendors","chunk-common"]),n()})({3:function(e,t,n){e.exports=n("9f4a")},"8bbf":function(e,t){e.exports=Vue},"9f4a":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("8bbf"),o=n.n(r),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mod_play",attrs:{id:"app"}},[n("Icons"),n("PlayHeader"),e.videoPlayInfoList.length>0?n("ModPlayer",{ref:"ModPlayer",attrs:{"play-groups":e.videoPlayInfoList,title:e.title,"poster-url":e.posterUrl,"video-url":e.videoUrl}}):e._e(),n("VideoIntro",{attrs:{title:e.title,"refresh-btn":e.refreshBtn}}),n("XPlayList",{attrs:{"video-play-infos":e.videoPlayInfoList,"current-video-url":e.videoUrl},on:{changeVideoUrl:e.changeVideoUrl}}),e.showLoading?n("Loading",{attrs:{"error-msg":e.errorMsg}}):e._e(),n("ModRecommend",{attrs:{title:"友情链接",feeds:e.feeds}})],1)},a=[],s=(n("99af"),n("7db0"),n("fb6a"),n("5034")),c=n("3f87"),u=n("3a5e"),l=n("c5a6"),p=n("6021"),f=n("9688"),d=n("ee1a"),h=n("db49"),g=n.n(h),v=(n("d3b7"),n("cebe")),y=n.n(v),m="https://api.pet2.net",w={listVideoOriginByTitle:function(e,t){return new Promise((function(n,r){var o="".concat(m,"/video/play/listOrigin");y.a.post(o,{title:e,page:t}).then((function(e){n(e.data)})).catch((function(e){console.log(e);var t={title:e.message,msg:JSON.stringify(e)};r(t)}))}))},getDetailVideoInfoByOpenId:function(e){return new Promise((function(t,n){var r="".concat(m,"/video/play/origin/detail");y.a.post(r,{openId:e}).then((function(e){t(e.data)})).catch((function(e){console.log(e);var t={title:e.message,msg:JSON.stringify(e)};n(t)}))}))}},b=(n("e25e"),n("96cf"),n("1da1")),P="",I=cloudbase.init({env:"onespider-461969"}),O=I.auth({persistence:"local"}),x=I.database(),L=20,U={login:function(){return new Promise((function(e,t){O.getLoginState().then((function(n){if(n)return e(!0);O.anonymousAuthProvider().signIn().then((function(){e(!0)})).catch((function(){t(!1)}))}))}))},listAllPost:function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.login().then((function(){}));case 2:return n=x.collection("video-play-infos"),e.abrupt("return",n.skip(L*t).limit(L).orderBy("_id","desc").get());case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),listPosts:function(e){return new Promise((function(t,n){var r="".concat(P,"/wp-json/wp/v2/posts");(parseInt(e)<2||isNaN(e))&&(e=null),y.a.get(r,{params:{page:e}}).then((function(e){t(e.data)})).catch((function(e){console.log(e);var t={title:e.message,msg:JSON.stringify(e)};n(t)}))}))},getPost:function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.login().then((function(){}));case 2:return n=x.collection("video-play-infos"),e.abrupt("return",n.doc(t).get());case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),listVideos:function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.login().then((function(){}));case 2:return n=x.collection("video-play-infos"),e.abrupt("return",n.where({title:t,show:!0}).get());case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getRelatedPost:function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.login().then((function(){}));case 2:return n=x.collection("video-play-infos"),r=new x.RegExp({regexp:t,options:"i"}),e.abrupt("return",n.where({"title.rendered":r}).get());case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),postDetail:function(e){return new Promise((function(t,n){var r="".concat(P,"/wp-json/wp/v2/posts/").concat(e);y.a.get(r,{}).then((function(e){t(e.data)})).catch((function(e){console.log(e);var t={title:e.message,msg:JSON.stringify(e)};n(t)}))}))},getVideoOriginInfoByOpenId:function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.login().then((function(){}));case 2:return n=x.collection("video_origin_info"),e.abrupt("return",n.where({openId:t}).get());case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getVideoPlayInfoByOpenId:function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.login().then((function(){}));case 2:return n=x.collection("video_play_info"),e.abrupt("return",n.where({videoOriginOpenId:t}).get());case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},j=n("8ded"),R={name:"app",components:{ModRecommend:s["a"],PlayHeader:c["a"],Loading:u["a"],Icons:l["a"],XPlayList:p["a"],VideoIntro:d["a"],ModPlayer:f["a"]},data:function(){return{showLoading:!0,errorMsg:"",refreshBtn:"如遇播放失败，请刷新重试",feeds:[{title:"一只魔方[全网资源搜索]",subTitle:"膜拜！庆国皇室 全员恶人",topTip:"超前点播",footerTip:"资源搜索",url:"https://v.pet2.net/cs/",picUrl:"https://f.pet2.net/wb/mw690/b4ce362dly1fthmxu64t5j20hp09rgms.jpg"},{title:"魔方导航[发现新站点]",subTitle:"膜拜！庆国皇室 全员恶人",topTip:"超前点播",footerTip:"全46集",url:"",picUrl:"http://puui.qpic.cn/tv/0/480546508_498280/0"}],videoPlayInfoList:[],videoUrl:"",posterUrl:"",title:"",openId:"",playVideoUrl:"".concat(location.origin).concat(location.pathname),originInfo:{}}},mounted:function(){var e=this.$utils.getUrlKey("id"),t=this.$utils.getUrlKey("flag");this.title=this.$utils.getUrlKey("title"),this.openId=this.$utils.getUrlKey("openId"),this.posterUrl=this.$utils.getUrlKey("poster"),this.loadData(e,t)},methods:{changeVideoUrl:function(e){e!==this.videoUrl&&(this.videoUrl=e,this.$refs.ModPlayer.playVideoWithUrl(e,this.videoType))},loadData:function(e,t){var n=this;this.showLoading=!0;var r=!1;r?U.getVideoPlayInfoByOpenId(this.openId).then((function(e){n.showLoading=!1,n.videoPlayInfoList=[{origin:"default",originName:"共享播放源",show:!0,videoPlayList:e.data}],n.videoUrl="https://cn1.av101.fun/pv/AO87w5e583v.m3u8"})):w.getDetailVideoInfoByOpenId(this.openId).then((function(e){console.log(e),n.showLoading=!1,0===e.code?(n.videoPlayInfoList=[{origin:"default",originName:"共享播放源",show:!0,videoPlayList:e.data.playList}],n.videoPlayInfoList.length<1?n.refreshBtn="抱歉，没有找到相关视频":(n.videoUrl=n.videoPlayInfoList[0].videoPlayList[0].videoUrl,n.posterUrl=n.videoPlayInfoList[0].cover)):n.refreshBtn="抱歉，没有找到相关视频"})).catch((function(e){n.errorMsg=e}))},loadRelatedFeeds:function(e){},getCatName:function(e){return"电影"},writePlayRecord:function(e){var t=j.get(g.a.userPlayInfoKey);if(t){var n=t.playRecords,r=n.find((function(t){if(t._id===e._id)return!0}));if(r)return;return n.length>4&&(n=n.slice(0,4)),n.unshift(e),t.playRecords=n,void j.set(g.a.userPlayInfoKey,t)}j.set(g.a.userPlayInfoKey,{userId:"nil-name",playRecords:[e]})}}},_=R,V=n("2877"),M=Object(V["a"])(_,i,a,!1,null,null,null),k=M.exports,B=n("ca00"),T=n("caf9");o.a.config.productionTip=!1,o.a.use(T["a"],{preLoad:1.3,error:"https://pages-1251448557.cos.ap-shanghai.myqcloud.com/images/cube.jpeg",loading:"https://6f6e-onespider-461969-1251448557.tcb.qcloud.la/app/loading.svg?sign=aba6a438f2665f6c2d8730bb78e05526&t=1584800622",attempt:1}),o.a.prototype.$utils=B["a"],new o.a({render:function(e){return e(k)}}).$mount("#app")},c06d:function(e,t){e.exports=DPlayer},cebe:function(e,t){e.exports=axios}});